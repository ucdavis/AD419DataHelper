@model AD419.DataHelper.Web.ViewModels.ExpenseOrgMappingsViewModel

@{
}

<h2>Expense OrgR (and Org) to AD-419 OrgR Remapping</h2>
<div>
    @if (Model.UnknownDepartments.Count > 0)
    {
        <h2>Unknown Departments</h2>

        <h4> The following expenses have an Unknown AD-419 Reporting Org:</h4>
        <i>Please add a new Reporting Organization or @Html.ActionLink("Remap the Expense's Department to an Existing AD-419 Reporting Org", "Index", "ExpenseOrgMappings").</i>
        <table id="unknownDepartmentsTable" class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.UnknownDepartments[0].Chart)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.UnknownDepartments[0].OrgR)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.UnknownDepartments[0].Org)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.UnknownDepartments[0].Account)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.UnknownDepartments[0].Expenses)
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.UnknownDepartments)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Chart)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OrgR)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Org)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Account)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Expenses)
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p><br /><h4><i>Note: There are <strong>zero</strong> unknown expense departments that need to be added or remapped at this time.</i></h4></p>
    }
</div>
<hr />

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<hr/>
<table id="expenseMappingsTable" class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.ExpenseOrgMappings[0].Chart)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ExpenseOrgMappings[0].ExpenseOrgR)
            </th>
            
            <th>
                @Html.DisplayNameFor(model => model.ExpenseOrgMappings[0].ExpenseOrg)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ExpenseOrgMappings[0].AD419OrgR)
            </th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.ExpenseOrgMappings)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Chart)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ExpenseOrgR)
                </td>
                
                <td>
                    @if (item.ExpenseOrg == null)
                    {
                        <i>All</i>
                    }

                    else
                    {
                        @Html.DisplayFor(modelItem => item.ExpenseOrg)
                    } 
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AD419OrgR)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id })
                </td>
                <td>
                    @Html.ActionLink("Details", "Details", new { id = item.Id })
                </td>
                <td>
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }
    </tbody>
</table>


@section AdditionalScripts
{
    <script>
        $(function() {
            $('#expenseMappingsTable').DataTable({
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
                columnDefs: [
                    { targets: [-1, -2, -3], sortable: false }
                ],
                displayLength: -1
            });
        })
    </script>
}
